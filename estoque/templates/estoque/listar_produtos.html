{% extends "estoque/base.html" %}

{% block title %}Lista de Produtos{% endblock %}

{% block content %}
<div class="main">
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Lista de Produtos</h2>
    <div>
        <a href="{% url 'adicionar_produto' %}" class="btn shadow btn-add me-2">Adicionar Produto</a>
        <a href="{% url 'historico_geral' %}" class="btn shadow btn-secondary">Histórico Geral</a>
    </div>
</div>

<form method="GET" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="Buscar produto" value="{{ request.GET.q }}">
        <button class="btn search-btn" type="submit">
            <i class="fas fa-search"></i>
        </button>
        <a href="{% url 'listar_produtos' %}" class="btn btn-secondary">Limpar</a>
    </div>
</form>


<table class="table" style="background-color: #F5F5F5;">
    <thead>
        <tr>
            <th>Nome</th>
            <th>Preço</th>
            <th>Qtd</th>
            <th>Categoria</th>
            <th>Fornecedor</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for produto in produtos %}
        <tr>
            <td>{{ produto.nome }}</td>
            <td>R$ {{ produto.preco }}</td>
            <td>{{ produto.quantidade }}</td>
            <td>{{ produto.categoria }}</td>
            <td>{{ produto.fornecedor }}</td>
            <td>
                <a href="{% url 'editar_produto' produto.id %}" class="btn btn-sm btn-warning">Editar</a>
                <a href="{% url 'registrar_movimentacao' produto.id %}" class="btn btn-sm btn-info">Movimentar</a>

                <a href="{% url 'excluir_produto' produto.id %}" class="btn btn-sm btn-danger">Excluir</a>

            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">Nenhum produto cadastrado.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</div>

{% endblock %}